@model BookStoreProject.Models.Book

@{
    ViewBag.Title = "AddNewBook";
}
<style>
    input, select, textarea {
        max-width: 285px;
        min-width: 262px;
    }
         .getcover{
            background-size: cover;
    background-image: url('../../logos/register.jfif');
            height: 125%;
    }   
</style>
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<h2 style="color:aliceblue">AddNewBook</h2>
<br />
<br />
@using (Html.BeginForm("AddNewBook", "Book", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {

<div class="row col-xl-12">
    <div class="col-xl-8">
        <div class="col-xl-12">
         

                <div class="row">
                    @Html.LabelFor(x => x.BookName, htmlAttributes: new { @class = "control-lable col-md-4", @style = " color:aliceblue" })
                    <div class="col-md-8">
                        @Html.EditorFor(x => x.BookName, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(x => x.BookName, "", new { @class = "text-danger" })
                    </div>
                </div>
                    <br />
                    <div class="row">
                        @Html.LabelFor(x => x.BookDescription, htmlAttributes: new { @class = "control-lable col-md-4", @style = " color:aliceblue" })
                        <div class="col-md-8">
                            @Html.EditorFor(x => x.BookDescription, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(x => x.BookDescription, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        @Html.LabelFor(x => x.BookPrice, htmlAttributes: new { @class = "control-lable col-md-4", @style = " color:aliceblue" })
                        <div class="col-md-8">
                            @Html.EditorFor(x => x.BookPrice, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(x => x.BookPrice, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-md-4">
                            @Html.LabelFor(x => x.Category, htmlAttributes: new { @class = "control-lable  ", @style = "width:100%; color:aliceblue" })
                        </div>
                        <div class="col-md-8">
                    
                            @Html.DropDownList("Categories", new SelectList(ViewBag.names), new { @class = "form-control  d-inline-block" })
                            <a href="/Category/AddNewCatgory"style="color:aliceblue; font-size:medium">New Category</a>
                        </div>

                    </div>
                    <br />
                    <div class="row">
                        <div class="col-md-4">
                            @Html.LabelFor(x => x.Author, htmlAttributes: new { @class = "control-lable ", @style = " color:aliceblue" })
                        </div>
                        <div class="col-md-8">
                      
                            @Html.DropDownList("Authors", new SelectList(ViewBag.authornmes), new { @class = "form-control   d-inline-block" })
                            <a href="/Author/AddNewAuthor"style="color:aliceblue; font-size:medium">New Author</a>
                        </div>

                    </div>

                    <br />
                    <div class="row">
                        <div class="btn btn-primary">
                            <input name="image" id="image" type="file" value="image" />
                        </div>
                        <br />
                        <br />
                    </div>
                    <div class="row ">
                        <input class="btn btn-block btn-danger" type="submit" value="Save" />
                    </div>


        </div>
    </div>

    <div class="col-xl-4">
     
        <img class="img-responsive"  style="width:80%; height:70% ;size:cover;margin-bottom:10px" id="targetimage" />
        @Html.TextAreaFor(x => x.downloadLink, htmlAttributes: new { @class = "control-lable ", @placeholder = "Download Link", @style = "color :gray " });
    </div>
</div>}
<div class="clearfix"></div>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery-3.4.1.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<script>
    $(document).ready(function () {

        $("#image").change(function () {
            var file = this.files;

            if(file && file[0])
            {

                ReadImage(file[0]);
            }

        })
        var ReadImage = function (file)
        {

            var Reader = new FileReader;
            var image = new Image;
            Reader.readAsDataURL(file);
            Reader.onload = function (_file) {
                image.src = _file.target.result;

                image.onload = function () {

                    $("#targetimage").attr('src', _file.target.result);
                }
            }
        }

    })
</script>
